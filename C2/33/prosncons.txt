В авторском решении присутствует цикл в цикле. Код короче.